<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyzing Resume - SkillSync</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .spinner {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .pulse-dot {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .progress-bar {
            animation: progress 3s ease-in-out;
        }
        @keyframes progress {
            from { width: 0%; }
            to { width: 100%; }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <!-- Navigation Header -->
    <nav class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <button onclick="goBack()" class="mr-4 text-gray-500 hover:text-gray-700 transition-colors">
                        <i class="fas fa-arrow-left text-xl"></i>
                    </button>
                    <div class="flex-shrink-0">
                        <h1 class="text-2xl font-bold text-transparent bg-clip-text gradient-bg">SkillSync</h1>
                    </div>
                    <div class="ml-10 hidden md:block">
                        <h2 class="text-lg text-gray-600">Analyzing Resume</h2>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow flex items-center justify-center px-4">
        <div class="max-w-2xl w-full">
            <!-- Analysis Card -->
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <!-- Header -->
                <div class="text-center mb-8">
                    <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-brain text-blue-600 text-3xl spinner"></i>
                    </div>
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">Analyzing Your Resume</h1>
                    <p class="text-lg text-gray-600">Extracting skills and generating personalized insights...</p>
                </div>

                <!-- Progress Steps -->
                <div class="space-y-4 mb-8">
                    <!-- Step 1 -->
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-medium">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="ml-4 flex-1">
                            <p class="font-medium text-gray-900">Resume uploaded successfully</p>
                            <p class="text-sm text-gray-600">File processed and validated</p>
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium pulse-dot">
                            <i class="fas fa-spinner spinner"></i>
                        </div>
                        <div class="ml-4 flex-1">
                            <p class="font-medium text-gray-900">Extracting skills and experience</p>
                            <p class="text-sm text-gray-600">AI-powered text analysis in progress...</p>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-gray-300 text-white rounded-full flex items-center justify-center text-sm font-medium">
                            3
                        </div>
                        <div class="ml-4 flex-1">
                            <p class="font-medium text-gray-400">Analyzing skill gaps</p>
                            <p class="text-sm text-gray-400">Comparing against job requirements</p>
                        </div>
                    </div>

                    <!-- Step 4 -->
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-gray-300 text-white rounded-full flex items-center justify-center text-sm font-medium">
                            4
                        </div>
                        <div class="ml-4 flex-1">
                            <p class="font-medium text-gray-400">Generating learning roadmap</p>
                            <p class="text-sm text-gray-400">Creating personalized development plan</p>
                        </div>
                    </div>

                    <!-- Step 5 -->
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-gray-300 text-white rounded-full flex items-center justify-center text-sm font-medium">
                            5
                        </div>
                        <div class="ml-4 flex-1">
                            <p class="font-medium text-gray-400">Finding job opportunities</p>
                            <p class="text-sm text-gray-400">Matching skills with career paths</p>
                        </div>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="mb-8">
                    <div class="flex justify-between text-sm text-gray-600 mb-2">
                        <span>Overall Progress</span>
                        <span id="progressPercent">20%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full progress-bar" style="width: 20%"></div>
                    </div>
                </div>

                <!-- Current Action -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
                    <div class="flex items-center justify-center mb-2">
                        <div class="w-2 h-2 bg-blue-600 rounded-full pulse-dot mr-2"></div>
                        <p class="text-blue-900 font-medium" id="currentAction">Extracting technical skills from resume content...</p>
                    </div>
                    <p class="text-sm text-blue-700">This usually takes 10-15 seconds</p>
                </div>
            </div>

            <!-- Tips Section -->
            <div class="mt-8 bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">
                    <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
                    While You Wait
                </h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="flex items-start">
                        <i class="fas fa-chart-line text-green-500 mt-1 mr-3"></i>
                        <div>
                            <p class="font-medium text-gray-900">Skill Gap Analysis</p>
                            <p class="text-sm text-gray-600">Identify missing skills for your target role</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i class="fas fa-route text-blue-500 mt-1 mr-3"></i>
                        <div>
                            <p class="font-medium text-gray-900">Learning Roadmap</p>
                            <p class="text-sm text-gray-600">Get step-by-step development plan</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i class="fas fa-briefcase text-purple-500 mt-1 mr-3"></i>
                        <div>
                            <p class="font-medium text-gray-900">Job Suggestions</p>
                            <p class="text-sm text-gray-600">Discover roles matching your skills</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i class="fas fa-file-alt text-orange-500 mt-1 mr-3"></i>
                        <div>
                            <p class="font-medium text-gray-900">Resume Optimization</p>
                            <p class="text-sm text-gray-600">ATS compatibility and formatting tips</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        let progress = 20;
        let currentStep = 2;
        
        const actions = [
            "Extracting technical skills from resume content...",
            "Analyzing work experience and projects...",
            "Identifying certifications and achievements...",
            "Comparing skills with job market requirements...",
            "Calculating skill match percentages...",
            "Generating personalized learning recommendations...",
            "Finding suitable career opportunities...",
            "Creating your development roadmap...",
            "Finalizing analysis results..."
        ];

        const steps = [
            { percent: 20, title: "Extracting skills and experience", action: 0 },
            { percent: 40, title: "Analyzing skill gaps", action: 2 },
            { percent: 60, title: "Generating learning roadmap", action: 4 },
            { percent: 80, title: "Finding job opportunities", action: 6 },
            { percent: 100, title: "Finalizing results", action: 8 }
        ];

        function updateProgress() {
            const progressBar = document.getElementById('progressBar');
            const progressPercent = document.getElementById('progressPercent');
            const currentAction = document.getElementById('currentAction');
            
            progressBar.style.width = progress + '%';
            progressPercent.textContent = progress + '%';
            
            if (currentStep <= steps.length) {
                const step = steps[currentStep - 1];
                currentAction.textContent = actions[step.action];
                
                // Update step indicators
                updateStepIndicators();
            }
            
            if (progress < 100) {
                progress += 20;
                currentStep++;
                setTimeout(updateProgress, 2000);
            } else {
                redirectToDashboard();
            }
        }

        function redirectToDashboard() {
            setTimeout(() => {
                window.location.href = 'dashboard.html';
            }, 1000);
        }

        function goBack() {
            if (window.history.length > 1) {
                window.history.back();
            } else {
                // If no history, go to home
                window.location.href = 'index.html';
            }
        }

        function updateStepIndicators() {
            const stepElements = document.querySelectorAll('.flex.items-center');
            
            stepElements.forEach((element, index) => {
                if (index < currentStep) {
                    // Completed step
                    const circle = element.querySelector('.w-8');
                    if (circle) {
                        circle.className = 'w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-medium';
                        circle.innerHTML = '<i class="fas fa-check"></i>';
                    }
                    
                    const text = element.querySelectorAll('p');
                    if (text.length > 0) {
                        text[0].className = 'font-medium text-gray-900';
                        text[1].className = 'text-sm text-gray-600';
                    }
                } else if (index === currentStep - 1) {
                    // Current step
                    const circle = element.querySelector('.w-8');
                    if (circle) {
                        circle.className = 'w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium pulse-dot';
                        circle.innerHTML = '<i class="fas fa-spinner spinner"></i>';
                    }
                    
                    const text = element.querySelectorAll('p');
                    if (text.length > 0) {
                        text[0].className = 'font-medium text-gray-900';
                        text[1].className = 'text-sm text-gray-600';
                    }
                }
            });
        }

        // Start progress animation
        setTimeout(updateProgress, 1000);
        
        // Trigger actual analysis
        setTimeout(() => {
            // This will be handled by the dashboard page after redirect
            if (window.opener) {
                window.opener.performAnalysis();
            }
        }, 2000);
    </script>
</body>
</html>
